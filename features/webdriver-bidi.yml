name: WebDriver BiDi
description: WebDriver BiDi is a bidirectional protocol that allows a WebDriver client and a browser to communicate with each other.
spec: https://w3c.github.io/webdriver-bidi/
group: webdriver
# WebDriver BiDi has many BCD keys but, for now, we're not trying to track
# them all as individual features, even if some parts could be standalone
#  (e.g. webdriver.bidi.webExtension or webdriver.bidi.network).
# Instead, we're pinning this feature to a few keys in compute_from below,
# to track initial support for the feature. Later, we can move some of the
# individual keys to other features as needed.
status:
  compute_from:
    # The following keys are a subset of the compat_features below.
    # They are the most critical keys for using the WebDriver BiDi protocol
    # - webdriver.bidi.session.new # Partial in Firefox. Plan is to mark as supported in BCD and create sub-features for the partial things.
    - webdriver.bidi.session.status
    - webdriver.bidi.session.subscribe
    - webdriver.bidi.session.unsubscribe
    - webdriver.bidi.script.evaluate
    - webdriver.bidi.script.callFunction
    - webdriver.bidi.browser.close
    - webdriver.bidi.browsingContext.navigate
    - webdriver.bidi.browsingContext.create
    - webdriver.bidi.browsingContext.load_event
    - webdriver.bidi.browsingContext.getTree
    - webdriver.bidi.browsingContext.close
    # - webdriver.bidi.browsingContext.contextCreated_event # Partial in Firefox. Plan is to mark as supported in BCD and create sub-features for the partial things.
    # - webdriver.bidi.browsingContext.contextDestroyed_event # Partial in Firefox. Plan is to mark as supported in BCD and create sub-features for the partial things.
    - webdriver.bidi.input.performActions
    - webdriver.bidi.input.releaseActions

compat_features:
  # Below is the entire list of BCD keys for WebDriver BiDi.
  # The keys are grouped by modules, and commentary is provided
  # on which keys are critical, important, or optional for using
  # the WebDriver BiDi protocol in tests.

  # ---------------------
  # Session module.
  - webdriver.bidi.session
  # Critical. Every test needs a session.
  - webdriver.bidi.session.new
  - webdriver.bidi.session.new.capabilities_parameter
  - webdriver.bidi.session.status
  # Critical. All BiDi events go through these.
  - webdriver.bidi.session.subscribe
  - webdriver.bidi.session.subscribe.contexts_parameter
  - webdriver.bidi.session.subscribe.events_parameter
  - webdriver.bidi.session.subscribe.userContexts_parameter
  - webdriver.bidi.session.unsubscribe
  - webdriver.bidi.session.unsubscribe.contexts_parameter
  - webdriver.bidi.session.unsubscribe.events_parameter
  # Optional. You can always end the session by closing the browser (browser.close command).
  - webdriver.bidi.session.end

  # ---------------------
  # Script module.
  - webdriver.bidi.script
  # Critical. Run JS on the tested page.
  - webdriver.bidi.script.evaluate
  - webdriver.bidi.script.evaluate.awaitPromise_parameter
  - webdriver.bidi.script.evaluate.expression_parameter
  - webdriver.bidi.script.evaluate.resultOwnership_parameter
  - webdriver.bidi.script.evaluate.serializationOptions_parameter
  - webdriver.bidi.script.evaluate.target_parameter
  - webdriver.bidi.script.evaluate.userActivation_parameter
  - webdriver.bidi.script.callFunction
  - webdriver.bidi.script.callFunction.arguments_parameter
  - webdriver.bidi.script.callFunction.awaitPromise_parameter
  - webdriver.bidi.script.callFunction.functionDeclaration_parameter
  - webdriver.bidi.script.callFunction.resultOwnership_parameter
  - webdriver.bidi.script.callFunction.serializationOptions_parameter
  - webdriver.bidi.script.callFunction.target_parameter
  - webdriver.bidi.script.callFunction.this_parameter
  - webdriver.bidi.script.callFunction.userActivation_parameter
  # Optional.
  - webdriver.bidi.script.addPreloadScript
  - webdriver.bidi.script.addPreloadScript.arguments_parameter
  - webdriver.bidi.script.addPreloadScript.contexts_parameter
  - webdriver.bidi.script.addPreloadScript.functionDeclaration_parameter
  - webdriver.bidi.script.addPreloadScript.sandbox_parameter
  - webdriver.bidi.script.addPreloadScript.userContexts_parameter
  - webdriver.bidi.script.disown
  - webdriver.bidi.script.disown.handles_parameter
  - webdriver.bidi.script.disown.target_parameter
  - webdriver.bidi.script.getRealms
  - webdriver.bidi.script.getRealms.context_parameter
  - webdriver.bidi.script.getRealms.type_parameter
  - webdriver.bidi.script.message_event
  - webdriver.bidi.script.message_event.channel_parameter
  - webdriver.bidi.script.message_event.data_parameter
  - webdriver.bidi.script.message_event.source_parameter
  - webdriver.bidi.script.realmCreated_event
  - webdriver.bidi.script.realmCreated_event.context_parameter
  - webdriver.bidi.script.realmCreated_event.origin_parameter
  - webdriver.bidi.script.realmCreated_event.owners_parameter
  - webdriver.bidi.script.realmCreated_event.realm_parameter
  - webdriver.bidi.script.realmCreated_event.sandbox_parameter
  - webdriver.bidi.script.realmCreated_event.type_parameter
  - webdriver.bidi.script.realmDestroyed_event
  - webdriver.bidi.script.realmDestroyed_event.realm_parameter
  - webdriver.bidi.script.removePreloadScript
  - webdriver.bidi.script.removePreloadScript.script_parameter

  # ---------------------
  # Browser module.
  - webdriver.bidi.browser
  # Important. To close the browser window after a test.
  - webdriver.bidi.browser.close
  # Optional. To manage user contexts, such as containers in firefox.
  - webdriver.bidi.browser.createUserContext
  - webdriver.bidi.browser.createUserContext.acceptInsecureCerts_parameter
  - webdriver.bidi.browser.createUserContext.proxy_parameter
  - webdriver.bidi.browser.getUserContexts
  - webdriver.bidi.browser.removeUserContext
  - webdriver.bidi.browser.removeUserContext.userContext_parameter
  # Optional. To get top level windows.
  - webdriver.bidi.browser.getClientWindows

  # ---------------------
  # Browsing context module.
  - webdriver.bidi.browsingContext
  # Critical. To navigate to a page.
  - webdriver.bidi.browsingContext.navigate
  - webdriver.bidi.browsingContext.navigate.context_parameter
  - webdriver.bidi.browsingContext.navigate.url_parameter
  - webdriver.bidi.browsingContext.navigate.wait_parameter
  # Critical. To create a new tab.
  - webdriver.bidi.browsingContext.create
  - webdriver.bidi.browsingContext.create.background_parameter
  - webdriver.bidi.browsingContext.create.referenceContext_parameter
  - webdriver.bidi.browsingContext.create.type_parameter
  - webdriver.bidi.browsingContext.create.userContext_parameter
  # Critical. To know when the page has loaded.
  - webdriver.bidi.browsingContext.load_event
  - webdriver.bidi.browsingContext.load_event.context_parameter
  - webdriver.bidi.browsingContext.load_event.navigation_parameter
  - webdriver.bidi.browsingContext.load_event.timestamp_parameter
  - webdriver.bidi.browsingContext.load_event.url_parameter
  # Critical. To list tabs, iframes, etc.
  - webdriver.bidi.browsingContext.getTree
  - webdriver.bidi.browsingContext.getTree.maxDepth_parameter
  - webdriver.bidi.browsingContext.getTree.root_parameter
  # Important. To close a tab.
  - webdriver.bidi.browsingContext.close
  - webdriver.bidi.browsingContext.close.context_parameter
  - webdriver.bidi.browsingContext.close.promptUnload_parameter
  # Important. To open other tabs, which can't be done without events.
  - webdriver.bidi.browsingContext.contextCreated_event
  - webdriver.bidi.browsingContext.contextCreated_event.children_parameter
  - webdriver.bidi.browsingContext.contextCreated_event.clientWindow_parameter
  - webdriver.bidi.browsingContext.contextCreated_event.context_parameter
  - webdriver.bidi.browsingContext.contextCreated_event.originalOpener_parameter
  - webdriver.bidi.browsingContext.contextCreated_event.parent_parameter
  - webdriver.bidi.browsingContext.contextCreated_event.url_parameter
  - webdriver.bidi.browsingContext.contextCreated_event.userContext_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event
  - webdriver.bidi.browsingContext.contextDestroyed_event.children_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event.clientWindow_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event.context_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event.originalOpener_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event.parent_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event.url_parameter
  - webdriver.bidi.browsingContext.contextDestroyed_event.userContext_parameter
  # Optional. To simulate user activation, for some web features that need it.
  - webdriver.bidi.browsingContext.activate
  - webdriver.bidi.browsingContext.activate.context_parameter
  # Optional.
  - webdriver.bidi.browsingContext.captureScreenshot
  - webdriver.bidi.browsingContext.captureScreenshot.clip_parameter
  - webdriver.bidi.browsingContext.captureScreenshot.context_parameter
  - webdriver.bidi.browsingContext.captureScreenshot.format_parameter
  - webdriver.bidi.browsingContext.captureScreenshot.origin_parameter
  # Optional. Nice event to listen to, but can also use the load event.
  - webdriver.bidi.browsingContext.domContentLoaded_event
  - webdriver.bidi.browsingContext.domContentLoaded_event.context_parameter
  - webdriver.bidi.browsingContext.domContentLoaded_event.navigation_parameter
  - webdriver.bidi.browsingContext.domContentLoaded_event.timestamp_parameter
  - webdriver.bidi.browsingContext.domContentLoaded_event.url_parameter
  # Optional.
  - webdriver.bidi.browsingContext.downloadWillBegin_event
  - webdriver.bidi.browsingContext.downloadWillBegin_event.context_parameter
  - webdriver.bidi.browsingContext.downloadWillBegin_event.navigation_parameter
  - webdriver.bidi.browsingContext.downloadWillBegin_event.suggestedFilename_parameter
  - webdriver.bidi.browsingContext.downloadWillBegin_event.timestamp_parameter
  - webdriver.bidi.browsingContext.downloadWillBegin_event.url_parameter
  # Optional. Useful for test frameworks mostly.
  - webdriver.bidi.browsingContext.fragmentNavigated_event
  - webdriver.bidi.browsingContext.fragmentNavigated_event.context_parameter
  - webdriver.bidi.browsingContext.fragmentNavigated_event.navigation_parameter
  - webdriver.bidi.browsingContext.fragmentNavigated_event.timestamp_parameter
  - webdriver.bidi.browsingContext.fragmentNavigated_event.url_parameter
  - webdriver.bidi.browsingContext.navigationCommitted_event
  - webdriver.bidi.browsingContext.navigationCommitted_event.context_parameter
  - webdriver.bidi.browsingContext.navigationCommitted_event.navigation_parameter
  - webdriver.bidi.browsingContext.navigationCommitted_event.timestamp_parameter
  - webdriver.bidi.browsingContext.navigationCommitted_event.url_parameter
  - webdriver.bidi.browsingContext.navigationFailed_event
  - webdriver.bidi.browsingContext.navigationFailed_event.context_parameter
  - webdriver.bidi.browsingContext.navigationFailed_event.navigation_parameter
  - webdriver.bidi.browsingContext.navigationFailed_event.timestamp_parameter
  - webdriver.bidi.browsingContext.navigationFailed_event.url_parameter
  - webdriver.bidi.browsingContext.navigationStarted_event
  - webdriver.bidi.browsingContext.navigationStarted_event.context_parameter
  - webdriver.bidi.browsingContext.navigationStarted_event.navigation_parameter
  - webdriver.bidi.browsingContext.navigationStarted_event.timestamp_parameter
  - webdriver.bidi.browsingContext.navigationStarted_event.url_parameter
  # Optional. To manage dialog windows.
  - webdriver.bidi.browsingContext.handleUserPrompt
  - webdriver.bidi.browsingContext.handleUserPrompt.accept_parameter
  - webdriver.bidi.browsingContext.handleUserPrompt.context_parameter
  - webdriver.bidi.browsingContext.handleUserPrompt.userText_parameter
  - webdriver.bidi.browsingContext.userPromptClosed_event
  - webdriver.bidi.browsingContext.userPromptClosed_event.accepted_parameter
  - webdriver.bidi.browsingContext.userPromptClosed_event.context_parameter
  - webdriver.bidi.browsingContext.userPromptClosed_event.type_parameter
  - webdriver.bidi.browsingContext.userPromptClosed_event.userText_parameter
  - webdriver.bidi.browsingContext.userPromptOpened_event
  - webdriver.bidi.browsingContext.userPromptOpened_event.context_parameter
  - webdriver.bidi.browsingContext.userPromptOpened_event.defaultValue_parameter
  - webdriver.bidi.browsingContext.userPromptOpened_event.handler_parameter
  - webdriver.bidi.browsingContext.userPromptOpened_event.message_parameter
  - webdriver.bidi.browsingContext.userPromptOpened_event.type_parameter
  # ??
  - webdriver.bidi.browsingContext.historyUpdated_event
  - webdriver.bidi.browsingContext.historyUpdated_event.context_parameter
  - webdriver.bidi.browsingContext.historyUpdated_event.timestamp_parameter
  - webdriver.bidi.browsingContext.historyUpdated_event.url_parameter
  # Optional. To get nodes via css selectors, etc. But can also be done via JS.
  - webdriver.bidi.browsingContext.locateNodes
  - webdriver.bidi.browsingContext.locateNodes.context_parameter
  - webdriver.bidi.browsingContext.locateNodes.locator_parameter
  - webdriver.bidi.browsingContext.locateNodes.maxNodeCount_parameter
  - webdriver.bidi.browsingContext.locateNodes.serializationOptions_parameter
  - webdriver.bidi.browsingContext.locateNodes.startNodes_parameter
  # Optional.
  - webdriver.bidi.browsingContext.print
  - webdriver.bidi.browsingContext.print.background_parameter
  - webdriver.bidi.browsingContext.print.context_parameter
  - webdriver.bidi.browsingContext.print.margin_parameter
  - webdriver.bidi.browsingContext.print.orientation_parameter
  - webdriver.bidi.browsingContext.print.pageRanges_parameter
  - webdriver.bidi.browsingContext.print.page_parameter
  - webdriver.bidi.browsingContext.print.scale_parameter
  - webdriver.bidi.browsingContext.print.shrinkToFit_parameter
  # Optional, same as navigate.
  - webdriver.bidi.browsingContext.reload
  - webdriver.bidi.browsingContext.reload.context_parameter
  - webdriver.bidi.browsingContext.reload.ignoreCache_parameter
  - webdriver.bidi.browsingContext.reload.wait_parameter
  # Optional. Nice to have for responsive design testing.
  - webdriver.bidi.browsingContext.setViewport
  - webdriver.bidi.browsingContext.setViewport.context_parameter
  - webdriver.bidi.browsingContext.setViewport.devicePixelRatio_parameter
  - webdriver.bidi.browsingContext.setViewport.userContexts_parameter
  - webdriver.bidi.browsingContext.setViewport.viewport_parameter
  # Optional.
  - webdriver.bidi.browsingContext.traverseHistory
  - webdriver.bidi.browsingContext.traverseHistory.context_parameter
  - webdriver.bidi.browsingContext.traverseHistory.delta_parameter

  # ---------------------
  # Emulation module.
  - webdriver.bidi.emulation
  - webdriver.bidi.emulation.setGeolocationOverride
  - webdriver.bidi.emulation.setGeolocationOverride.contexts_parameter
  - webdriver.bidi.emulation.setGeolocationOverride.coordinates_parameter
  - webdriver.bidi.emulation.setGeolocationOverride.error_parameter
  - webdriver.bidi.emulation.setGeolocationOverride.userContexts_parameter

  # ---------------------
  # Input module.
  - webdriver.bidi.input
  # Critical. To simulate user input.
  # (although this can also be done by eval'ing JS)
  - webdriver.bidi.input.performActions
  - webdriver.bidi.input.performActions.actions_parameter
  - webdriver.bidi.input.performActions.context_parameter
  - webdriver.bidi.input.releaseActions
  - webdriver.bidi.input.releaseActions.context_parameter
  # Optional. For file input only.
  - webdriver.bidi.input.setFiles
  - webdriver.bidi.input.setFiles.context_parameter
  - webdriver.bidi.input.setFiles.element_parameter
  - webdriver.bidi.input.setFiles.files_parameter
  - webdriver.bidi.input.fileDialogOpened_event
  - webdriver.bidi.input.fileDialogOpened_event.context_parameter
  - webdriver.bidi.input.fileDialogOpened_event.element_parameter
  - webdriver.bidi.input.fileDialogOpened_event.multiple_parameter

  # ---------------------
  # Log module.
  - webdriver.bidi.log
  # Optional.
  - webdriver.bidi.log.entryAdded_event
  - webdriver.bidi.log.entryAdded_event.args_parameter
  - webdriver.bidi.log.entryAdded_event.level_parameter
  - webdriver.bidi.log.entryAdded_event.method_parameter
  - webdriver.bidi.log.entryAdded_event.source_parameter
  - webdriver.bidi.log.entryAdded_event.stackTrace_parameter
  - webdriver.bidi.log.entryAdded_event.text_parameter
  - webdriver.bidi.log.entryAdded_event.timestamp_parameter
  - webdriver.bidi.log.entryAdded_event.type_parameter

  # ---------------------
  # Network module.
  - webdriver.bidi.network
  # Optional. To mock responses, etc.
  - webdriver.bidi.network.addIntercept
  - webdriver.bidi.network.addIntercept.contexts_parameter
  - webdriver.bidi.network.addIntercept.phases_parameter
  - webdriver.bidi.network.addIntercept.urlPatterns_parameter
  - webdriver.bidi.network.authRequired_event
  - webdriver.bidi.network.authRequired_event.context_parameter
  - webdriver.bidi.network.authRequired_event.intercepts_parameter
  - webdriver.bidi.network.authRequired_event.isBlocked_parameter
  - webdriver.bidi.network.authRequired_event.navigation_parameter
  - webdriver.bidi.network.authRequired_event.redirectCount_parameter
  - webdriver.bidi.network.authRequired_event.request_parameter
  - webdriver.bidi.network.authRequired_event.response_parameter
  - webdriver.bidi.network.authRequired_event.timestamp_parameter
  - webdriver.bidi.network.beforeRequestSent_event
  - webdriver.bidi.network.beforeRequestSent_event.context_parameter
  - webdriver.bidi.network.beforeRequestSent_event.initiator_parameter
  - webdriver.bidi.network.beforeRequestSent_event.intercepts_parameter
  - webdriver.bidi.network.beforeRequestSent_event.isBlocked_parameter
  - webdriver.bidi.network.beforeRequestSent_event.navigation_parameter
  - webdriver.bidi.network.beforeRequestSent_event.redirectCount_parameter
  - webdriver.bidi.network.beforeRequestSent_event.request_parameter
  - webdriver.bidi.network.beforeRequestSent_event.timestamp_parameter
  - webdriver.bidi.network.continueRequest
  - webdriver.bidi.network.continueRequest.body_parameter
  - webdriver.bidi.network.continueRequest.cookies_parameter
  - webdriver.bidi.network.continueRequest.headers_parameter
  - webdriver.bidi.network.continueRequest.method_parameter
  - webdriver.bidi.network.continueRequest.request_parameter
  - webdriver.bidi.network.continueRequest.url_parameter
  - webdriver.bidi.network.continueResponse
  - webdriver.bidi.network.continueResponse.cookies_parameter
  - webdriver.bidi.network.continueResponse.credentials_parameter
  - webdriver.bidi.network.continueResponse.headers_parameter
  - webdriver.bidi.network.continueResponse.reasonPhrase_parameter
  - webdriver.bidi.network.continueResponse.request_parameter
  - webdriver.bidi.network.continueResponse.statusCode_parameter
  - webdriver.bidi.network.continueWithAuth
  - webdriver.bidi.network.continueWithAuth.request_parameter
  - webdriver.bidi.network.failRequest
  - webdriver.bidi.network.failRequest.request_parameter
  - webdriver.bidi.network.fetchError_event
  - webdriver.bidi.network.fetchError_event.context_parameter
  - webdriver.bidi.network.fetchError_event.errorText_parameter
  - webdriver.bidi.network.fetchError_event.intercepts_parameter
  - webdriver.bidi.network.fetchError_event.isBlocked_parameter
  - webdriver.bidi.network.fetchError_event.navigation_parameter
  - webdriver.bidi.network.fetchError_event.redirectCount_parameter
  - webdriver.bidi.network.fetchError_event.request_parameter
  - webdriver.bidi.network.fetchError_event.timestamp_parameter
  - webdriver.bidi.network.provideResponse
  - webdriver.bidi.network.provideResponse.body_parameter
  - webdriver.bidi.network.provideResponse.cookies_parameter
  - webdriver.bidi.network.provideResponse.headers_parameter
  - webdriver.bidi.network.provideResponse.reasonPhrase_parameter
  - webdriver.bidi.network.provideResponse.request_parameter
  - webdriver.bidi.network.provideResponse.statusCode_parameter
  - webdriver.bidi.network.removeIntercept
  - webdriver.bidi.network.removeIntercept.intercept_parameter
  - webdriver.bidi.network.responseCompleted_event
  - webdriver.bidi.network.responseCompleted_event.context_parameter
  - webdriver.bidi.network.responseCompleted_event.intercepts_parameter
  - webdriver.bidi.network.responseCompleted_event.isBlocked_parameter
  - webdriver.bidi.network.responseCompleted_event.navigation_parameter
  - webdriver.bidi.network.responseCompleted_event.redirectCount_parameter
  - webdriver.bidi.network.responseCompleted_event.request_parameter
  - webdriver.bidi.network.responseCompleted_event.response_parameter
  - webdriver.bidi.network.responseCompleted_event.timestamp_parameter
  - webdriver.bidi.network.responseStarted_event
  - webdriver.bidi.network.responseStarted_event.context_parameter
  - webdriver.bidi.network.responseStarted_event.intercepts_parameter
  - webdriver.bidi.network.responseStarted_event.isBlocked_parameter
  - webdriver.bidi.network.responseStarted_event.navigation_parameter
  - webdriver.bidi.network.responseStarted_event.redirectCount_parameter
  - webdriver.bidi.network.responseStarted_event.request_parameter
  - webdriver.bidi.network.responseStarted_event.response_parameter
  - webdriver.bidi.network.responseStarted_event.timestamp_parameter
  # Optional. Cache behavior.
  - webdriver.bidi.network.setCacheBehavior
  - webdriver.bidi.network.setCacheBehavior.cacheBehavior_parameter
  - webdriver.bidi.network.setCacheBehavior.contexts_parameter
  # ??
  - webdriver.bidi.network.disownData
  # ??
  - webdriver.bidi.network.getData

  # ---------------------
  # Permission module.
  - webdriver.bidi.permission
  # Optional
  - webdriver.bidi.permission.setPermission

  # ---------------------
  # Storage module.
  - webdriver.bidi.storage
  # Optional.
  - webdriver.bidi.storage.deleteCookies
  - webdriver.bidi.storage.deleteCookies.filter_parameter
  - webdriver.bidi.storage.deleteCookies.partition_parameter
  - webdriver.bidi.storage.getCookies
  - webdriver.bidi.storage.getCookies.filter_parameter
  - webdriver.bidi.storage.getCookies.partition_parameter
  - webdriver.bidi.storage.setCookie
  - webdriver.bidi.storage.setCookie.cookie_parameter
  - webdriver.bidi.storage.setCookie.partition_parameter

  # ---------------------
  # WebExtension module.
  - webdriver.bidi.webExtension
  # Optional. Useful in some niche cases./
  # For example, Cypress uses it to install web extensions during tests.
  - webdriver.bidi.webExtension.install
  - webdriver.bidi.webExtension.install.extensionData_parameter
  - webdriver.bidi.webExtension.uninstall
  - webdriver.bidi.webExtension.uninstall.extension_parameter
